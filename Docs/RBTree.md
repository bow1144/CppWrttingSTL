# 红黑树

## 一、红黑树的性质

* 左根右：红黑树是一种二叉搜索树
* 根叶黑：根节点和叶节点（虚构）是黑色
* 不红红：两个红色节点不能是父子关系
* 黑路同：所有路径从根节点到叶子节点的黑节点数量相同

## 二、红黑树的插入

* 插入节点默认为红色：不违反“黑路同”
* 父节点是黑色：直接插入
* 插入根节点：直接变黑
* 叔叔节点是红色：叔叔、父亲、爷爷节点变色，爷爷变插入节点
* 叔叔节点是黑色：（LL，RR，LR，RL）旋转，旋转点和旋转中心变色

## 三、红黑树的删除

### 1. 左右都有子树
* 直接用后驱节点（刚好比该节点大）替代，然后删除（转化成后三种情况）

### 2. 只有左子树/右子树
* 直接用孩子替换删除节点，并变黑

### 3. 没有孩子的红节点
* 直接删除

### 4. 没有孩子的黑节点

* **兄弟是黑色**
  * 兄弟至少有一个红孩子
    * *LL型*：兄弟是父亲的左孩子，兄弟的左孩子是红节点
      1. 变色：*r变s，s变p，p变黑*
      2. 旋转：右旋
    * *RR型*：与*LL型*对称
    * *LR型*：兄弟是父亲的左孩子，兄弟的儿子左黑右红
      1. 变色：*r变p，p变黑*
      2. 旋转：左旋左孩子，然后右旋
    * *RL型*：与*LR型*对称
  * 兄弟都是黑孩子
    1. 兄弟变红
    2. 双黑上移
       * 遇到红节点：直接变单黑
       * 遇到根节点：直接变单黑
       * 普通黑节点：执行双黑操作
    3. 双黑变单黑
* **兄弟是红色**
  1. 兄父变色
  2. 父朝双黑旋转
  3. 保持双黑继续调整






